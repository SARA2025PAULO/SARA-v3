rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
  
    // Allow any user (authenticated or not) to create a document in the 'mail' collection.
    // This is required for the "request a demo" form to work, as it triggers an email.
    // No one should be able to read, update, or delete from the mail queue.
    match /mail/{mailId} {
      allow create: if true;
      allow read, update, delete: if false; 
    }

    // For all other collections (properties, contracts, users, etc.),
    // require the user to be authenticated to perform any action.
    // This is a secure baseline. These rules can be made more specific later
    // (e.g., users can only edit their own documents).
    match /{collection}/{docId} {
      allow read, write: if request.auth != null;
    }
  }
}
